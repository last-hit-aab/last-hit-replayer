{"version":3,"sources":["../index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kBAAgB;AAChB,oDAA8B;AAC9B,uCAA0C;AA0CJ,qBA1C7B,mBAAU,CA0C6B;AAzChD,yDAA2C;AAyClB,sBAzClB,aAAW,CAyCkB;AAxCpC,yCAAyE;AAwCvB,gCAxCzC,+BAAqB,CAwCyC;AAAE,4BAxCzC,2BAAiB,CAwCyC;AAvC1F,2CAAgD;AAuCvC,yBAvCA,yBAAc,CAuCA;AArCvB,qCAAsD;AAEtD,IAAM,GAAG,GAAG;IACX,IAAM,SAAS,GAAG,oBAAY,EAAE,CAAC;IACjC,iBAAO,CAAC,IAAI,CAAE,CAAA,aAAW,SAAS,eAAY,CAAA,CAAC,IAAY,CAAC,KAAK,CAAC,CAAC;IAEnE,CAAC;;;;;;oBAEa,qBAAM,mBAAU,EAAE,EAAA;;oBAAxB,GAAG,GAAG,SAAkB;oBACxB,KAAK,GAAG,iBAAS,CAAC,GAAG,CAAC,CAAC;yBACzB,GAAG,CAAC,YAAY,EAAE,EAAlB,wBAAkB;oBACrB,qBAAM,+BAAqB,CAAC,KAAK,EAAE,GAAG,CAAC,EAAA;;oBAAvC,SAAuC,CAAC;;wBAExC,qBAAM,2BAAiB,CAAC,KAAK,EAAE,GAAG,CAAC,EAAA;;oBAAnC,SAAmC,CAAC;;;;;oBAGrC,iBAAO,CAAC,KAAK,CAAC,GAAC,CAAC,CAAC;oBACjB,sBAAO,OAAO,CAAC,MAAM,CAAC,GAAC,CAAC,EAAC;;;;SAE1B,CAAC,EAAE;SACF,IAAI,CAAC;QACL,mDAAmD;QACnD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC;SACD,KAAK,CAAC,UAAC,MAAc;QACrB,IAAI,MAAM,KAAK,QAAQ,EAAE;YACxB,sDAAsD;YACtD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAChB;aAAM;YACN,mDAAmD;YACnD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAChB;IACF,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,kBAAe,GAAG,CAAC","file":"index.js","sourcesContent":["import 'colors';\nimport console from 'console';\nimport { loadConfig } from './lib/config';\nimport Environment from './lib/config/env';\nimport { doOnMultipleProcesses, doOnSingleProcess } from './lib/handler';\nimport { createReplayer } from './lib/replayer';\nimport { FlowFile } from './lib/types';\nimport { findFlows, getProcessId } from './lib/utils';\n\nconst run = () => {\n\tconst processId = getProcessId();\n\tconsole.info((`Process[${processId}] started.`.bold as any).green);\n\n\t(async (): Promise<void> => {\n\t\ttry {\n\t\t\tconst env = await loadConfig();\n\t\t\tconst flows = findFlows(env);\n\t\t\tif (env.isOnParallel()) {\n\t\t\t\tawait doOnMultipleProcesses(flows, env);\n\t\t\t} else {\n\t\t\t\tawait doOnSingleProcess(flows, env);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t})()\n\t\t.then(() => {\n\t\t\t// console.log(`process[${processId}] exit on 0.`);\n\t\t\tprocess.exit(0);\n\t\t})\n\t\t.catch((reason: string) => {\n\t\t\tif (reason === 'jammed') {\n\t\t\t\t// console.log(`process[${processId}] exit on 1024.`);\n\t\t\t\tprocess.exit(2);\n\t\t\t} else {\n\t\t\t\t// console.log(`process[${processId}] exit on 1.`);\n\t\t\t\tprocess.exit(1);\n\t\t\t}\n\t\t});\n};\n\nexport default run;\nexport { FlowFile };\nexport { createReplayer, Environment, loadConfig, doOnMultipleProcesses, doOnSingleProcess };\n"]}