{"version":3,"sources":["../lib/replayer/replay-emitter.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,kDAAkC;AAOlC;IAAwB,6BAAY;IAApC;;IAAsC,CAAC;IAAD,gBAAC;AAAD,CAAtC,AAAuC,CAAf,gBAAY,GAAG;AAEvC;IAAA;QACS,YAAO,GAAG,IAAI,SAAS,EAAE,CAAC;IA4BnC,CAAC;IA3BA,4BAAI,GAAJ,UAAK,KAAsB,EAAE,GAAQ;QACpC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;IAC/B,CAAC;IACD,0BAAE,GAAF,UAAG,KAAsB,EAAE,QAAkB;QAA7C,iBAWC;QAVA,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,EAAE,UAAA,GAAG;YACzB,QAAQ,CACP;gBACC,KAAK,EAAE,UAAC,KAAK,EAAE,GAAG;oBACjB,KAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;gBACvB,CAAC;aACD,EACD,GAAG,CACH,CAAC;QACH,CAAC,CAAC,CAAC;IACJ,CAAC;IACD,4BAAI,GAAJ,UAAK,KAAsB,EAAE,QAAkB;QAA/C,iBAWC;QAVA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,UAAA,GAAG;YAC3B,QAAQ,CACP;gBACC,KAAK,EAAE,UAAC,KAAK,EAAE,GAAG;oBACjB,KAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;gBACvB,CAAC;aACD,EACD,GAAG,CACH,CAAC;QACH,CAAC,CAAC,CAAC;IACJ,CAAC;IACF,oBAAC;AAAD,CA7BA,AA6BC,IAAA;AAED,kBAAe,aAAa,CAAC","file":"replay-emitter.js","sourcesContent":["import EventEmitter from 'events';\n\nexport type CallbackEvent = {\n\treply: (event: string | symbol, arg: any) => void;\n};\nexport type Callback = (event: CallbackEvent, arg: any) => void;\n\nclass AnEmitter extends EventEmitter {}\n\nclass ReplayEmitter {\n\tprivate emitter = new AnEmitter();\n\tsend(event: string | symbol, arg: any): void {\n\t\tthis.emitter.emit(event, arg);\n\t}\n\ton(event: string | symbol, callback: Callback): void {\n\t\tthis.emitter.on(event, arg => {\n\t\t\tcallback(\n\t\t\t\t{\n\t\t\t\t\treply: (event, arg) => {\n\t\t\t\t\t\tthis.send(event, arg);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\targ\n\t\t\t);\n\t\t});\n\t}\n\tonce(event: string | symbol, callback: Callback) {\n\t\tthis.emitter.once(event, arg => {\n\t\t\tcallback(\n\t\t\t\t{\n\t\t\t\t\treply: (event, arg) => {\n\t\t\t\t\t\tthis.send(event, arg);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\targ\n\t\t\t);\n\t\t});\n\t}\n}\n\nexport default ReplayEmitter;\n"]}